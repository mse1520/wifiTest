<!DOCTYPE html>
<html lang='ko'>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Finder IOT Edge System - Sensor</title>
    <style>
        body {
            text-align: center;
        }

        p {
            margin: 5px;
        }
    </style>
</head>

<body>
    <form action='/save' method='get' onsubmit='onClickSetIp(event)'>
        <p><input type='text' id='inputIp' name='ip' placeholder='IP'></p>
        <p><input type='password' id='inputGateway' name='gateway' placeholder='Gateway'></p>
        <p><input type='password' id='inputNetMsk' name='netMsk' placeholder='Subnet Mask'></p>
        <input type='submit' value='저장'>
    </form>

    <script>
        const onClickSetIp = e => {
            e.preventDefault();

            const ip = document.querySelector('#inputIp').value;
            const gateway = document.querySelector('#inputGateway').value;
            const netMsk = document.querySelector('#inputNetMsk').value;

            const formData = new FormData();
            formData.append('ip', ip);
            formData.append('gateway', gateway);
            formData.append('netMsk', netMsk);

            fetch('http://192.168.100.43/setIp', { method: 'get', body: formData })
                .then(response => response.text())
                .then(getSetIpResult)
                .catch(console.log);
        };

        const getSetIpResult = data => {
            console.log(data);
            if (data === 'success')
                alert('입력값이 저장되었습니다');
            else
                alert('입력값 저장에 실패하였습니다');
        };
    </script>
</body>

</html>